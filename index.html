<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Counter</title>
    <!-- Firebase Configuration -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCoP6dxdtoAIGrGWCjjydkPSGQnM3ZOcis",
            authDomain: "counter-9c5c8.firebaseapp.com",
            projectId: "counter-9c5c8",
            storageBucket: "counter-9c5c8.appspot.com",
            messagingSenderId: "493825958884",
            appId: "1:493825958884:web:ac5a6d847b3a0f30a6ddf1"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Reference to the counter document
        const counterRef = doc(db, "counters", "counter");

        // Initialize counter value
        let counter = 0;

        // Listen for real-time updates
        onSnapshot(counterRef, (doc) => {
            if (doc.exists()) {
                counter = doc.data().value;
                document.getElementById('counter').innerText = counter;
            }
        });

        // Function to increment counter
        async function incrementCounter() {
            counter++;
            document.getElementById('counter').innerText = counter;
            await setDoc(counterRef, { value: counter });
        }

        // Function to reset counter
        async function resetCounter() {
            counter = 0;
            document.getElementById('counter').innerText = counter;
            await setDoc(counterRef, { value: counter });
        }

        // Make functions available globally
        window.incrementCounter = incrementCounter;
        window.resetCounter = resetCounter;
    </script>
</head>
<body>
    <h1>Counter: <span id="counter">0</span></h1>
    <button onclick="incrementCounter()">Increment</button>
    <button onclick="resetCounter()">Reset</button>
</body>
</html>
